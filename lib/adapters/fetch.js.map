{"version":3,"sources":["../../src/adapters/fetch.js"],"names":["fetch","url","opts","then","resp","status","Promise","reject","statusText","toJSON","data","processData","JSON","parse","err","text","resolve"],"mappings":"AAAA;;;;;;kBAoBe,UAAUA,KAAV,EAAiB;AAC9B,SAAO,UAACC,GAAD,EAAMC,IAAN;AAAA,WAAcF,MAAMC,GAAN,EAAWC,IAAX,EAAiBC,IAAjB,CAAsB,UAACC,IAAD,EAAS;AAClD,UAAIA,KAAKC,MAAL,IAAe,GAAnB,EAAwB;AACtB,eAAOC,QAAQC,MAAR,CAAe,EAAEF,QAAQD,KAAKC,MAAf,EAAuBG,YAAYJ,KAAKI,UAAxC,EAAf,CAAP;AACD,OAFD,MAEO;AACL,eAAOC,OAAOL,IAAP,EAAaD,IAAb,CAAkB,UAACO,IAAD,EAAS;AAChC,cAAIN,KAAKC,MAAL,IAAe,GAAf,IAAsBD,KAAKC,MAAL,GAAc,GAAxC,EAA6C;AAC3C,mBAAOK,IAAP;AACD,WAFD,MAEO;AACL,mBAAOJ,QAAQC,MAAR,CAAeG,IAAf,CAAP;AACD;AACF,SANM,CAAP;AAOD;AACF,KAZoB,CAAd;AAAA,GAAP;AAeD,C;;AAlCD,SAASC,WAAT,CAAqBD,IAArB,EAA2B;AACzB,MAAI;AACF,WAAOE,KAAKC,KAAL,CAAWH,IAAX,CAAP;AACD,GAFD,CAEE,OAAOI,GAAP,EAAY;AACZ,WAAOJ,IAAP;AACD;AACF;;AAED,SAASD,MAAT,CAAgBL,IAAhB,EAAsB;AACpB,MAAIA,KAAKW,IAAT,EAAe;AACb,WAAOX,KAAKW,IAAL,GAAYZ,IAAZ,CAAiBQ,WAAjB,CAAP;AACD,GAFD,MAEO,IAAIP,gBAAgBE,OAApB,EAA6B;AAClC,WAAOF,KAAKD,IAAL,CAAUQ,WAAV,CAAP;AACD,GAFM,MAEA;AACL,WAAOL,QAAQU,OAAR,CAAgBZ,IAAhB,EAAsBD,IAAtB,CAA2BQ,WAA3B,CAAP;AACD;AACF","file":"fetch.js","sourcesContent":["\"use strict\";\n\nfunction processData(data) {\n  try {\n    return JSON.parse(data);\n  } catch (err) {\n    return data;\n  }\n}\n\nfunction toJSON(resp) {\n  if (resp.text) {\n    return resp.text().then(processData);\n  } else if (resp instanceof Promise) {\n    return resp.then(processData);\n  } else {\n    return Promise.resolve(resp).then(processData);\n  }\n}\n\nexport default function (fetch) {\n  return (url, opts)=> fetch(url, opts).then((resp)=> {\n    if (resp.status >= 400) {\n      return Promise.reject({ status: resp.status, statusText: resp.statusText });\n    } else {\n      return toJSON(resp).then((data)=> {\n        if (resp.status >= 200 && resp.status < 300) {\n          return data;\n        } else {\n          return Promise.reject(data);\n        }\n      });\n    }\n  }\n\n  );\n}\n"]}